generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model CHITIETGIOHANG {
  MaCTGH         String         @id @default(uuid())
  created_at     DateTime       @default(now())
  SoLuong        Int            @default(0)
  MaGH           String
  MaCTSP         String
  CHITIETSANPHAM CHITIETSANPHAM @relation(fields: [MaCTSP], references: [MaCTSP])
  GIOHANG        GIOHANG        @relation(fields: [MaGH], references: [MaGH])
}

model CHITIETSANPHAM {
  MaCTSP         String           @id @default(uuid())
  created_at     DateTime         @default(now())
  updated_at     DateTime         @default(now())
  KichCo         KichCo
  MauSac         MauSac
  HinhAnh        String?
  MaSP           String
  SoLuong        Int              @default(0)
  TrangThai      TrangThai        @default(ACTIVE)
  CHITIETGIOHANG CHITIETGIOHANG[]
  SANPHAM        SANPHAM          @relation(fields: [MaSP], references: [MaSP])
  DONHANG        DONHANG[]
  NHAPHANG       NHAPHANG[]
}

model DANHMUC {
  MaDM        String      @id @default(uuid())
  created_at  DateTime    @default(now())
  updated_at  DateTime    @default(now())
  TenDM       String
  TrangThai   TrangThai   @default(ACTIVE)
  MaLoai      String
  LOAIDANHMUC LoaiDanhMuc
  SANPHAM     SANPHAM[]
}

model DONHANG {
  MaDH             String             @id @default(uuid())
  created_at       DateTime           @default(now())
  SoLuong          Int                @default(0)
  TongTien         Int?
  MaVoucher        String?
  MaCTSP           String
  MaSK             String?
  MaKH             String
  CHITIETSANPHAM   CHITIETSANPHAM     @relation(fields: [MaCTSP], references: [MaCTSP])
  KHACHHANG        KHACHHANG          @relation(fields: [MaKH], references: [MaKH])
  SUKIENUUDAI      SUKIENUUDAI?       @relation(fields: [MaSK], references: [MaSK])
  VOUCHER          VOUCHER?           @relation(fields: [MaVoucher], references: [MaVoucher])
  TINHTRANGDONHANG TINHTRANGDONHANG[]
}

model GIOHANG {
  MaGH           String           @id @default(uuid())
  created_at     DateTime         @default(now())
  MaKH           String
  CHITIETGIOHANG CHITIETGIOHANG[]
  KHACHHANG      KHACHHANG        @relation(fields: [MaKH], references: [MaKH])
}

model KHACHHANG {
  MaKH              String              @id @default(uuid())
  TenKH             String
  SoDienThoai       String
  Email             String?
  DiaChi            String?
  MaTK              String?
  DONHANG           DONHANG[]
  GIOHANG           GIOHANG[]
  TAIKHOAN          TAIKHOAN?           @relation(fields: [MaTK], references: [MaTK])
  PHANHOI           PHANHOI[]
  VOUCHER_KHACHHANG VOUCHER_KHACHHANG[]
}

model NHACUNGCAP {
  MaNCC      String     @id @default(uuid())
  created_at DateTime   @default(now())
  Email      String?
  DienThoai  String?
  DiaChi     String?
  TenNCC     String
  NHAPHANG   NHAPHANG[]
}

model NHANVIEN {
  MaNV        String    @id @default(uuid())
  TenNV       String
  SoDienThoai String?
  Email       String?
  CCCD        String?
  MaTK        String?
  TAIKHOAN    TAIKHOAN? @relation(fields: [MaTK], references: [MaTK])
}

model NHAPHANG {
  MaNH           String         @id @default(uuid())
  created_at     DateTime       @default(now())
  NgayNhap       DateTime       @default(now())
  SoLuong        Int
  MaCTSP         String
  MaNCC          String
  CHITIETSANPHAM CHITIETSANPHAM @relation(fields: [MaCTSP], references: [MaCTSP])
  NHACUNGCAP     NHACUNGCAP     @relation(fields: [MaNCC], references: [MaNCC])
}

model PHANHOI {
  MaPH           String    @id @default(uuid())
  created_at     DateTime  @default(now())
  MaKH           String
  MaSP           String
  DanhGia        String
  ChiTietDanhGia String?
  KHACHHANG      KHACHHANG @relation(fields: [MaKH], references: [MaKH])
  SANPHAM        SANPHAM   @relation(fields: [MaSP], references: [MaSP])
}

model QUYENHAN {
  MaQH            String            @id @default(uuid())
  created_at      DateTime          @default(now())
  TenQH           String?
  VAITRO_QUYENHAN VAITRO_QUYENHAN[]
}

model SANPHAM {
  MaSP           String           @id @default(uuid())
  created_at     DateTime         @default(now())
  updated_at     DateTime         @default(now())
  MoTa           String?
  TenSP          String
  GiaBan         Int
  GiaMua         Int
  TrangThai      TrangThai        @default(ACTIVE)
  MaDM           String
  CHITIETSANPHAM CHITIETSANPHAM[]
  PHANHOI        PHANHOI[]
  DANHMUC        DANHMUC          @relation(fields: [MaDM], references: [MaDM])
}

model SUKIENUUDAI {
  MaSK         String    @id @default(uuid())
  created_at   DateTime  @default(now())
  updated_at   DateTime  @default(now())
  NgayKT       DateTime
  TenSK        String
  NgayPH       DateTime
  PhanTramGiam Int
  DONHANG      DONHANG[]
}

model TAIKHOAN {
  MaTK       String      @id @default(uuid())
  created_at DateTime    @default(now())
  updated_at DateTime    @default(now())
  Username   String?
  MatKhau    String?
  Status     Boolean     @default(true)
  Avatar     String?
  MaVT       String
  KHACHHANG  KHACHHANG[]
  NHANVIEN   NHANVIEN[]
  VAITRO     VAITRO      @relation(fields: [MaVT], references: [MaVT])
}

model TINHTRANGDONHANG {
  MaTTDH     String           @id @default(uuid())
  created_at DateTime         @default(now())
  TrangThai  TrangThaiDonHang @default(DANG_XU_LY)
  MaDH       String?
  DONHANG    DONHANG?         @relation(fields: [MaDH], references: [MaDH])
}

model VAITRO {
  MaVT            String            @id @default(uuid())
  created_at      DateTime          @default(now())
  TenVT           String?
  TAIKHOAN        TAIKHOAN[]
  VAITRO_QUYENHAN VAITRO_QUYENHAN[]
}

model VAITRO_QUYENHAN {
  MaVTQH     String   @id @default(uuid())
  created_at DateTime @default(now())
  MaVT       String
  MaQH       String
  QUYENHAN   QUYENHAN @relation(fields: [MaQH], references: [MaQH])
  VAITRO     VAITRO   @relation(fields: [MaVT], references: [MaVT])
}

model VOUCHER {
  MaVoucher         String              @id @default(uuid())
  created_at        DateTime            @default(now())
  TenVoucher        String
  SoTien            Int                 @default(0)
  FreeShip          Boolean             @default(false)
  NgayBatDau        String
  NgayKetThuc       String
  DIeuKien          Int                 @default(0)
  DONHANG           DONHANG[]
  VOUCHER_KHACHHANG VOUCHER_KHACHHANG[]
}

model VOUCHER_KHACHHANG {
  MaVCKH     String    @id @default(uuid())
  created_at DateTime  @default(now())
  MaKH       String
  MaVoucher  String
  KHACHHANG  KHACHHANG @relation(fields: [MaKH], references: [MaKH])
  VOUCHER    VOUCHER   @relation(fields: [MaVoucher], references: [MaVoucher])
}

enum KichCo {
  S
  M
  L
  XL
  XXL
}

enum MauSac {
  Red
  Orange
  Yellow
  Green
  Blue
  Indigo
  Violet
  Black
  White
  Gray
  Brown
  Pink
}

enum TrangThai {
  ACTIVE
  INACTIVE
}

enum TrangThaiDonHang {
  DANG_XU_LY
  DANG_GIAO_HANG
  HOAN_TAT
}

enum TrangThaiSP {
  CON_HANG
  HET_HANG
  TAM_NGUNG
}

enum LoaiDanhMuc {
  NAM
  NU
  PHU_KIEN
}
